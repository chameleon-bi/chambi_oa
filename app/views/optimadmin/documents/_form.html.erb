<%= form_for @document, :html => {:multipart => true} do |f| %>
  <fieldset>
    <legend>Document Editor</legend>

    <div class="field">
      <%= f.label :name, 'Document title' %><br />
      <%= f.text_field :name %>
    </div>

    <div class="field">

      <% if f.object.send("#{:document.to_s}?") %>
        <p>
          <%= link_to "View current file", f.object.send(:document).url, target: '_blank' %>
        </p>
      <% end %>

      <%= f.file_field :document %>
    </div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
